generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id 							Int 						@id @default(autoincrement())
  name 						String
  email 					String 					@unique
  role 						Int
  password 				String?
	device          Device[]

  @@map("users")
  @@index(email)
}

model Device {
  id              Int             @id @default(autoincrement())
  name            String          
  userId          Int             @map("user_id")
  user            User            @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
	refreshToken 		RefreshToken?

  @@map("devices")
}

model RefreshToken {
	id 							Int 						@id @default(autoincrement())
	value 					String 					@unique
  origin          String
  deviceId        Int             @map("device_id") @unique
  device          Device          @relation(fields: [deviceId], references: [id], onDelete: Cascade, onUpdate: Cascade)

	@@map("refresh_tokens")
}

enum TOKENORIGIN {
  PASSWORD  @map("password")
  GOOGLE    @map("google")
}